\documentclass[11pt,titlepage,openright,twoside]{report}
\usepackage[a5paper]{geometry}
\usepackage[notlot]{tocbibind} % for having bibliography, list of figures, etc.. in the table of contents (nottoc,notlof,notlof for not displaying toc, lof, lot)
\usepackage[italian]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage{url} % per gestione url nella bibliografia
\usepackage{amssymb} % per r reali
\usepackage{amscd} % per diagrammi
\usepackage{caption}
\usepackage{textcomp}
\usepackage{subcaption}
\usepackage{graphicx} % per immagini
\usepackage[margin=10pt,font=small,labelfont=bf,labelsep=endash]{caption} % didascalie personalizzate
\usepackage{fancyhdr}%per intestazione personalizzata
\usepackage[bookmarks,hidelinks]{hyperref} % for pdf index and links
\usepackage{enumerate} % for small roman letters in enumerate
\usepackage{algorithm} % for algorithms
\usepackage{algpseudocode}
%\usepackage[acronyms,nopostdot,nogroupskip,toc,nonumberlist]{glossaries}
\usepackage{booktabs}
\usepackage{tabularx}
\usepackage{cite} % for citation grouping
\usepackage{pdfpages}
\usepackage[autostyle]{csquotes}
\usepackage{multirow}
\usepackage{tabularx}
\usepackage{ltablex}
\usepackage{bigstrut}
\usepackage{needspace}

%%========================================================
%%     modifica dimensioni e formato del titolo dei capitoli
%%
\usepackage{titlesec,color}
\newcommand{\hsp}{\hspace{10pt}}
\titleformat{\chapter}[hang]{\LARGE\bfseries}{\thechapter\hsp}{0pt}{\thispagestyle{fancy}\LARGE\bfseries}
\titlespacing*{\chapter}{0cm}{-\topskip+20pt}{20pt}[0pt]
%%
%%========================================================

%%========================================================
%%     carattere
%%
%\renewcommand{\rmdefault}{ptm} %Times
%\renewcommand*\rmdefault{ppl} %Palatino
%\renewcommand*\rmdefault{cmr} %Computer Modern Roman (default)
%%
%%========================================================


\setlength{\parindent}{0cm} %Disabilita indentazione dei paragrafi

\setlength{\headheight}{15pt}
\renewcommand{\arraystretch}{1.4}
\renewcommand{\alglinenumber}[1]{\tiny#1:}

\def\tabularxcolumn#1{m{#1}} %center vertically
\newcolumntype{s}{>{\centering\arraybackslash\hsize=.5\hsize}X} %center horizontally

%%========================================================
%%     Permette di inserire un pdf come immagini
%%
\makeatletter
\newcounter{imagepage}
\newcommand*{\foreachpage}[2]{%
  \begingroup
    \sbox0{\includegraphics{#1}}%
    \xdef\foreachpage@num{\the\pdflastximagepages}%
  \endgroup
  \setcounter{imagepage}{0}%
  \@whilenum\value{imagepage}<\foreachpage@num\do{%
    \stepcounter{imagepage}%
    #2\relax
  }%
}
\makeatother
%%
%%========================================================

%%========================================================
%%     previene l'interruzione di pagina su tabelle lunghe in caso di utilizzo multirow
%%
\makeatletter
\def\@cline#1-#2\@nil{%
  \omit
  \@multicnt#1%
  \advance\@multispan\m@ne
  \ifnum\@multicnt=\@ne\@firstofone{&\omit}\fi
  \@multicnt#2%
  \advance\@multicnt-#1%
  \advance\@multispan\@ne
  \leaders\hrule\@height\arrayrulewidth\hfill
  \cr
  \noalign{\nobreak\vskip-\arrayrulewidth}}
\makeatother
%%
%%========================================================


%%========================================================
%%     modifica dimensioni layout larghezza pagina
%%
\addtolength{\textwidth}{7mm}%aumento larghezza testo
\addtolength{\hoffset}{-3.5mm}%diminuisco colonna per note a fianco per centrare testo allargato
\addtolength{\evensidemargin}{-1mm}%sposto la colonna di testo delle pagine pari a sinistra
\addtolength{\oddsidemargin}{1mm}%sposto la colonna di testo delle pagine dispari a destra
%%
%%========================================================

%%========================================================
%%            personalizzazione intestazione
%%
% i comandi seguenti impediscono la scrittura in maiuscolo
% dei nomi dei capitoli e dei paragrafi nelle intestazioni
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
\fancyhf{} % rimuove l’attuale contenuto dell’intestazione
            % e del pi\‘e di pagina
%opzioni da mettere per twoside
\fancyhead[LE,RO]{\thepage}
\fancyhead[LO]{\nouppercase\rightmark}%\nouppercase elimina tutte le intestazioni maiuscole
\fancyhead[RE]{\nouppercase\leftmark}%\nouppercase elimina tutte le intestazioni maiuscole
%
%opzioni da mettere per oneside
%\fancyhead[RO]{\thepage}
%\fancyhead[LO]{\rightmark}
%
\renewcommand{\headrulewidth}{0.5pt}
\renewcommand{\footrulewidth}{0pt}
\addtolength{\headheight}{1.7pt} % riserva spazio per la linea
\fancypagestyle{plain}{%ridefinisce lo stile plain usato nelle pagine di chapter
\fancyhead{} % ignora, nello stile plain, le intestazioni
   \renewcommand{\headrulewidth}{0pt} % e la linea
   \fancyfoot[C]{\thepage}%per avere numero pagina anche pagina iniziale chapter
}
%%
%%========================================================

%%========================================================
%%   per imporre sillabazione
%%
\hyphenation{STSK}%
%%========================================================

%%========================================================
%%   comandi personalizzati
%%
\newcommand{\pedic}[2]{#1_{\text{#2}}}
%%========================================================

%\linespread{1.2}

\begin{document}
\raggedbottom % Prevent vertical justification
%%========================================================
%%  italian abstract and acknowledgements
\pagenumbering{roman}
\input{sources/0a_introduzione.tex}
\input{sources/0b_ringraziamenti.tex}
%%========================================================

%%========================================================
%%  indexes
\tableofcontents
%\listoffigures
%\printnoidxglossaries
%\listoftables
\cleardoublepage
%%========================================================

%%========================================================
%% thesis chapters
\pagenumbering{arabic} % normal page numbering
\pagestyle{fancy} % style with headnotes, rule, etc.
\addtolength{\headwidth}{12mm} % long rule
\input{sources/0c_saluto_vescovo.tex}
\input{sources/0d_auguri_ministro.tex}
\input{sources/1_documenti.tex}
\input{sources/2_stradario.tex}
\input{sources/3_Testimonianze.tex}
%%========================================================

\end{document}
